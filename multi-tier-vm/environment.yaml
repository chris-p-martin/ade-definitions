name: Multi-Tier VM Environment
version: 1.0.0
summary: Configurable multi-tier VM architecture with AZs
description: Deploy a configurable multi-tier application architecture with VMs distributed across Azure Availability Zones for high availability.
runner: Terraform
templatePath: main.tf

parameters:
  - id: environment_name
    name: Environment Name
    description: Name for this environment (1-20 chars, lowercase alphanumeric and hyphens)
    required: true
    default: multitier

  - id: location
    name: Azure Region
    description: Azure region for deployment
    required: false
    default: eastus
    allowed:
      - eastus
      - eastus2
      - westus
      - westus2
      - westus3
      - centralus
      - northeurope
      - westeurope
      - southeastasia
      - eastasia
      - japaneast

  - id: num_tiers
    name: Number of Tiers
    description: Number of application tiers (2 for web+app, 3 for web+app+data)
    required: false
    default: 3
    allowed:
      - 2
      - 3

  - id: vms_per_tier
    name: VMs per Tier
    description: Number of VM replicas in each tier for load balancing (1-5)
    required: false
    default: 2
    allowed:
      - 1
      - 2
      - 3
      - 4
      - 5

  - id: vm_size
    name: VM Size
    description: Azure VM size for all tier VMs
    required: false
    default: Standard_B2s
    allowed:
      - Standard_B1s
      - Standard_B1ms
      - Standard_B2s
      - Standard_B2ms
      - Standard_B4ms
      - Standard_D1_v2
      - Standard_D2_v2
      - Standard_D2s_v3
      - Standard_D4s_v3
      - Standard_E2_v3
      - Standard_E4_v3

  - id: admin_username
    name: Admin Username
    description: Username for VM administrative access via SSH
    required: false
    default: azureuser

  - id: ssh_public_key_path
    name: SSH Public Key Path
    description: Path to SSH public key file for passwordless authentication
    required: false
    default: ~/.ssh/id_rsa.pub

  - id: enable_security_baseline
    name: Enable Security Baseline
    description: Apply Azure Linux security baseline compliance to all VMs
    required: false
    default: true

  - id: enable_update_manager
    name: Enable Azure Update Manager v2
    description: Enable automatic patch management via Azure Update Manager v2
    required: false
    default: true

  - id: patch_assessment_frequency
    name: Patch Assessment Frequency
    description: How often to assess VMs for available patches
    required: false
    default: Weekly
    allowed:
      - Daily
      - Weekly
      - Monthly

  - id: enable_guest_config
    name: Enable Guest Configuration
    description: Enable Azure Guest Configuration for compliance monitoring
    required: false
    default: true
